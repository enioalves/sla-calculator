<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculadora de SLA</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9fafb;
      margin: 0;
      padding: 20px;
      display: flex;
      justify-content: center;
    }

    .container {
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      padding: 16px;
      max-width: 500px;
      width: 100%;
      box-sizing: border-box;
    }

    h2 {
      text-align: center;
      margin-bottom: 16px;
      font-size: 1.4rem;
      color: #333;
    }

    label {
      display: block;
      margin: 8px 0 4px;
      font-weight: bold;
      font-size: 0.85rem;
      color: #444;
    }

    input, select, button {
      width: 100%;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 0.95rem;
      box-sizing: border-box;
    }

    button {
      background: #7c3aed; /* Roxo */
      color: white;
      border: none;
      margin-top: 12px;
      cursor: pointer;
      transition: 0.2s;
    }

    button:hover {
      background: #5b21b6; /* Roxo mais escuro no hover */
    }

    .result {
      margin-top: 16px;
      padding: 10px;
      background: #f1f5f9;
      border-radius: 6px;
      font-size: 0.95rem;
      text-align: center;
    }

    /* Tooltip */
    .tooltip {
      position: relative;
      display: inline-block;
      width: 100%;
    }

    .tooltip .tooltiptext {
      visibility: hidden;
      width: 260px;
      background-color: #333;
      color: #fff;
      text-align: left;
      border-radius: 6px;
      padding: 8px;
      position: absolute;
      z-index: 1;
      bottom: 120%; 
      left: 50%;
      margin-left: -130px;
      opacity: 0;
      transition: opacity 0.3s;
      font-size: 0.8rem;
      line-height: 1.1rem;
    }

    .tooltip:hover .tooltiptext {
      visibility: visible;
      opacity: 1;
    }

    @media (max-width: 400px) {
      h2 { font-size: 1.1rem; }
      input, select, button { font-size: 0.85rem; padding: 7px; }
      .tooltip .tooltiptext { width: 200px; margin-left: -100px; font-size: 0.7rem; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Calculadora de SLA</h2>
    
    <label for="dataAbertura">Data de Abertura:</label>
    <input type="date" id="dataAbertura">

    <label for="horaAbertura">Hora de Abertura:</label>
    <input type="time" id="horaAbertura">

    <label for="severidade">Severidade:</label>
    <div class="tooltip">
      <select id="severidade">
        <option value="8">âš« CrÃ­tico</option>
        <option value="24">ðŸ”´ Alto</option>
        <option value="48">ðŸŸ¡ MÃ©dio</option>
        <option value="72">ðŸŸ¢ Baixo</option>
      </select>
      <div class="tooltiptext" id="tooltipText"></div>
    </div>

    <button onclick="calcularSLA()">Calcular SLA</button>

    <div class="result" id="resultado">Preencha os campos acima</div>
  </div>

  <script>
<script>
Â  Â  const feriadosFixos = [
Â  Â  Â  "01-01","04-21","05-01","09-07",
Â  Â  Â  "10-12","11-02","11-15","12-25"
Â  Â  ];

Â  Â  const tooltips = {
Â  Â  Â  "8": "CrÃ­tico (Severidade 1): Problemas que causam a interrupÃ§Ã£o total dos serviÃ§os ou impossibilidade de funÃ§Ãµes essenciais. Exemplo: instabilidades gerais do serviÃ§o de captura de publicaÃ§Ãµes, falhas em tribunais.",
Â  Â  Â  "24": "Alto (Severidade 2): Problemas que afetam parcialmente os serviÃ§os com impacto significativo. Exemplo: atraso ou falha na entrega de publicaÃ§Ãµes.",
Â  Â  Â  "48": "MÃ©dio (Severidade 3): Impacta funÃ§Ãµes nÃ£o essenciais ou tem soluÃ§Ã£o alternativa temporÃ¡ria. Exemplo: problema recorrente de homÃ´nimos.",
Â  Â  Â  "72": "Baixo (Severidade 4): DÃºvidas operacionais ou ajustes sem impacto significativo. Exemplo: ajustes simples de cadastro e termos."
Â  Â  };

Â  Â  const select = document.getElementById("severidade");
Â  Â  const tooltipDiv = document.getElementById("tooltipText");

Â  Â  // Inicializa o Tooltip
Â  Â  select.addEventListener("change", () => {
Â  Â  Â  tooltipDiv.textContent = tooltips[select.value];
Â  Â  });
Â  Â  tooltipDiv.textContent = tooltips[select.value];Â 

Â  Â  // ----------------------------------------------------
Â  Â  // NOVO: FunÃ§Ãµes de inicializaÃ§Ã£o da Data e Hora
Â  Â  // ----------------------------------------------------

Â  Â  function inicializarDataEHora() {
Â  Â  Â  const dataAberturaInput = document.getElementById("dataAbertura");
Â  Â  Â  const horaAberturaInput = document.getElementById("horaAbertura");

Â  Â  Â  // 1. Definir Data Atual
Â  Â  Â  const agora = new Date();

Â  Â  Â  // Formata a data para YYYY-MM-DD
Â  Â  Â  const ano = agora.getFullYear();
Â  Â  Â  const mes = String(agora.getMonth() + 1).padStart(2, '0');
Â  Â  Â  const dia = String(agora.getDate()).padStart(2, '0');
Â  Â  Â  dataAberturaInput.value = `${ano}-${mes}-${dia}`;

Â  Â  Â  // 2. Definir Hora Atual (quebrada em 15 em 15 minutos)

Â  Â  Â  let minutos = agora.getMinutes();
Â  Â  Â  let horas = agora.getHours();
Â  Â  Â  
Â  Â  Â  // Arredonda os minutos para o intervalo de 15 mais prÃ³ximo
Â  Â  Â  minutos = Math.ceil(minutos / 15) * 15;

Â  Â  Â  // Se os minutos arredondados ultrapassarem 60, incrementa a hora
Â  Â  Â  if (minutos >= 60) {
Â  Â  Â  Â  minutos = 0;
Â  Â  Â  Â  horas += 1;
Â  Â  Â  }

Â  Â  Â  // Garante que as horas nÃ£o passem de 24 (no caso de 23:53 arredondar para 24:00)
Â  Â  Â  // O input type="time" lida automaticamente com o rollover de data se as horas chegarem a 24, 
Â  Â  Â  // mas para garantir a formataÃ§Ã£o correta do input, limitamos a 23.
Â  Â  Â  if (horas >= 24) {
Â  Â  Â  Â  horas = 0; // O usuÃ¡rio deve ajustar a data para o dia seguinte, se necessÃ¡rio.
Â  Â  Â  }

Â  Â  Â  // Formata a hora para HH:MM
Â  Â  Â  const horaFormatada = String(horas).padStart(2, '0');
Â  Â  Â  const minutoFormatado = String(minutos).padStart(2, '0');
Â  Â  Â  
Â  Â  Â  horaAberturaInput.value = `${horaFormatada}:${minutoFormatado}`;
Â  Â  }

Â  Â  // ----------------------------------------------------
Â  Â  // Executa a funÃ§Ã£o de inicializaÃ§Ã£o quando a pÃ¡gina carrega
Â  Â  // ----------------------------------------------------
Â  Â  window.onload = inicializarDataEHora;


Â  Â  // FunÃ§Ãµes de CÃ¡lculo do SLA (Mantidas)
Â  Â  function isFeriado(date) {
Â  Â  Â  let mes = String(date.getMonth() + 1).padStart(2, "0");
Â  Â  Â  let dia = String(date.getDate()).padStart(2, "0");
Â  Â  Â  return feriadosFixos.includes(`${mes}-${dia}`);
Â  Â  }

Â  Â  function calcularSLA() {
Â  Â  Â  const dataInput = document.getElementById("dataAbertura").value;
Â  Â  Â  const horaInput = document.getElementById("horaAbertura").value;
Â  Â  Â  const horasUteis = parseInt(document.getElementById("severidade").value);

Â  Â  Â  if (!dataInput || !horaInput) {
Â  Â  Â  Â  document.getElementById("resultado").innerText = "Por favor, insira a data e hora de abertura.";
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  let data = new Date(`${dataInput}T${horaInput}`);
Â  Â  Â  let horasRestantes = horasUteis;

Â  Â  Â  while (horasRestantes > 0) {
Â  Â  Â  Â  data.setHours(data.getHours() + 1);
Â  Â  Â  Â  let hora = data.getHours();
Â  Â  Â  Â  let diaSemana = data.getDay();

Â  Â  Â  Â  if (
Â  Â  Â  Â  Â  diaSemana !== 0 && diaSemana !== 6 &&Â 
Â  Â  Â  Â  Â  !isFeriado(data) &&
Â  Â  Â  Â  Â  hora >= 9 && hora < 18
Â  Â  Â  Â  ) {
Â  Â  Â  Â  Â  horasRestantes--;
Â  Â  Â  Â  }
Â  Â  Â  }

Â  Â  Â  document.getElementById("resultado").innerText =
Â  Â  Â  Â  "Data/Hora Final: " + data.toLocaleString("pt-BR");
Â  Â  }
Â  </script>
  </script>
</body>
</html>
